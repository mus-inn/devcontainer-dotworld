#!/usr/bin/env bash

if [ ! -d /.composer ]; then
    mkdir /.composer
fi

chmod -R ugo+rw /.composer

chmod 666 /var/run/docker.sock 2>/dev/null || true

# Create Caddy config and data directories if they don't exist
mkdir -p /config/caddy /data/caddy 2>/dev/null || true

# Set default SERVER_NAME for FrankenPHP if not provided
export SERVER_NAME="${SERVER_NAME:-localhost, :80, :443}"

# Keep container running for devcontainer usage
# Laravel Octane with FrankenPHP can be started manually with:
# php artisan octane:start --server=frankenphp
while true; do
    sleep 1
done
